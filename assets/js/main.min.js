function resizeCanvas(){var e=Math.max(window.devicePixelRatio||1,1);canvas.width=canvas.offsetWidth*e,canvas.height=canvas.offsetHeight*e,canvas.getContext("2d").scale(e,e)}function sleep(e){for(var t=(new Date).getTime();(new Date).getTime()<t+1e3*e;);}function enableSubmit(){submitIsEnabled=!0}function selectOutput(e){outputSelect=e,$("input[name='email']").val(""),"download"==e?($("#download").removeClass("blu-button-bold-upper"),$("#download").addClass("blu-button-bold-upper-active"),$("#email").removeClass("blu-button-bold-upper-active"),$("#email").addClass("blu-button-bold-upper"),$("#email-input").hide(),$("#email-input").prop("required",!1)):($("#email").removeClass("blu-button-bold-upper"),$("#email").addClass("blu-button-bold-upper-active"),$("#download").removeClass("blu-button-bold-upper-active"),$("#download").addClass("blu-button-bold-upper"),$("#email-input").show(),$("#email-input").prop("required",!0))}function isValidDate(e){var t=e.split("/"),a=new Date(t[1]+"/"+t[0]+"/"+t[2]);return!(!a||a.getMonth()+1!=t[1]||a.getDate()!=Number(t[0]))}var wrapper=document.getElementById("signature-pad"),clearButton=wrapper.querySelector("[data-action=clear]"),undoButton=wrapper.querySelector("[data-action=undo]"),canvas=wrapper.querySelector("canvas"),signaturePad=new SignaturePad(canvas,{backgroundColor:"rgb(255, 255, 255)"});$(document).ready(function(){resizeCanvas(),$("#email-input").hide()}),$(".canvas-pad").on("click touchstart",function(){for(var e=document.getElementById("myform"),t=0;t<e.elements.length;t++)e.elements[t].blur()}),clearButton.addEventListener("click",function(e){signaturePad.clear()}),undoButton.addEventListener("click",function(e){var t=signaturePad.toData();t&&(t.pop(),signaturePad.fromData(t))}),$.Velocity.RegisterEffect("fadeInPanels",{defaultDuration:500,calls:[[{opacity:[1,.3],scale:[1,.5]}]]}),$(".panel").velocity("fadeInPanels",{stagger:250}),$(".accordion-link").click(function(e){e.preventDefault();var t=$(this).closest(".accordion"),a=$(this).closest(".panel"),n=t.find(".active");return!$(this).closest(".panel").find(".content-collapse").hasClass("velocity-animating")&&(!0!==e.handled&&(n.closest(".panel").find(".content-collapse").attr("aria-expanded",!1).velocity("slideUp",{easing:"easeOutQuad"}),$(this).hasClass("active")?$(this).attr("aria-expanded",!1).removeClass("active"):(a.find(".content-collapse").attr("aria-expanded",!0).velocity("slideDown",{easing:"easeOutQuad"}),t.find(".accordion-link").removeClass("active").attr("aria-expanded",!1),$(this).attr("aria-expanded",!0).addClass("active")),void(e.handled=!0)))}),$(".toggle-link").click(function(e){e.preventDefault();var t=$(this).closest(".panel");return!t.find(".content-collapse").hasClass("velocity-animating")&&(!0!==e.handled&&($(this).hasClass("active")?(t.find(".content-collapse").attr("aria-expanded",!1).velocity("slideUp",{easing:"easeOutQuad"}),$(this).attr("aria-expanded",!1).removeClass("active")):(t.find(".content-collapse").attr("aria-expanded",!0).velocity("slideDown",{easing:"easeOutQuad"}),$(this).attr("aria-expanded",!0).addClass("active")),void(e.handled=!0)))}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault(),document.querySelector(this.getAttribute("href")).scrollIntoView({behavior:"smooth"})})}),$(function(){$("input[name='born']").on("input",function(e){$(this).val($(this).val().replace(/[^0-9\/]/g,"")),10==$(this).val().length&&0==isValidDate($(this).val())&&$(this).val("")})}),$(function(){$("input[name='rel-dt']").on("input",function(e){$(this).val($(this).val().replace(/[^0-9\/]/g,"")),10==$(this).val().length&&0==isValidDate($(this).val())&&$(this).val("")})}),$(function(){$("input[name='telephone-number']").on("input",function(e){$(this).val($(this).val().replace(/[^0-9\+]/g,""))})}),$("#status").hide();var outputSelect="download",submitIsEnabled=!1;$("#myform").submit(function(e){if(0==submitIsEnabled)return $("#status").show(),$("#status").find("div").hide(),$("#status").find("span").html('<i style="font-size: 13px; margin-left: 5px;"> <i class="fas fa-times text-danger"></i> Perfavore risolvi il captcha per proseguire.</i>'),!1;var t=signaturePad.toDataURL(),a=t.replace(/^data:image\/(png|jpg);base64,/,""),n=$("<input>").attr("type","hidden").attr("name","imageData").val(a);if($("#myform").append(n),0==isValidDate($("input[name=born]").val()))return $("input[name=born]").val(""),!1;if(0==isValidDate($("input[name=rel-dt]").val()))return $("input[name=rel-dt]").val(""),!1;if($("#status").show(),$("#status").find("div").show(),"download"==outputSelect)return $("#status").find("span").html('<i style="font-size: 13px; margin-left: 5px;"> Attendi, il tuo download partir√† a breve...</i>'),submitIsEnabled=!1,!0;$("#status").find("span").html('<i style="font-size: 13px; margin-left: 5px;"> Attendi, riceverai a breve una mail con la tua autocertificazione...</i>');try{$.ajax({type:"POST",url:"generatepdf.php",data:$("form").serialize(),async:!0,success:function(e){var t=JSON.parse(e);$("#status").find("div").hide(),t.status?"download"!=outputSelect&&$("#status").find("span").html('<i style="font-size: 13px; margin-left: 5px;"> <i class="fas fa-check text-success"></i> '+t.message+"</i>"):$("#status").find("span").html('<i style="font-size: 13px; margin-left: 5px;"> <i class="fas fa-times text-danger"></i> '+t.message+"</i>")},complete:function(){},error:function(e){console.log(e)}})}catch(e){console.log(e)}return submitIsEnabled=!1,!1}),$(document).ready(function(){$("li.active").removeClass("active"),$('a[href="'+location.pathname+'"]').closest("li").addClass("active")});